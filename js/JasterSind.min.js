function getUrlVars(){var e={};window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(t,s,o){e[s]=o});return e}function check(e,t){for(res=[0,0],target=e.slice(0),guess=t.slice(0),i=0;i<guess.length;i++)target[i]==guess[i]&&(target[i]=guess[i]=void 0,res[0]+=1);for(i=0;i<guess.length;i++)null!=guess[i]&&-1!=target.indexOf(guess[i])&&(target[target.indexOf(guess[i])]=void 0,res[1]++);return res}function submit(){-1==game.currGuess.indexOf(-1)&&(chk=check(game.solution,game.currGuess),checkGuess(chk),4==chk[0]?(win_msg=document.createElement("DIV"),win_msg.classList="win_message",tries=$(".try.dot").length/4,win_msg.innerHTML="Congrats, you found the combination in "+(1==tries?"1 try!":tries+" tries, using "+game.colors.lenght+"colors!"),document.querySelector("#gameboard").appendChild(win_msg),showSolution(),$("#submit").animate({opacity:"0"},200,"swing"),$("#submit").attr("style","display: none"),$(".win_message").animate({opacity:"1"},800,"swing"),$("#clr_select").removeAttr("disabled"),$("#clr_select").prop("selectedIndex",0)):(game.currGuess=[-1,-1,-1,-1],newTry()))}function newTry(){$("#color_popup").addClass("hidden");const e=document.querySelectorAll(".try.dot");if(e.length)for(i=e.length-4;i<e.length;i++)e[i].classList.add("unclickable"),e[i].classList.remove("selected"),e[i].onclick=null;for(dotsC=document.createElement("OL"),dotsC.id="move"+N,dotsC.classList="dotsContainer",i=0;i<4;i++)dot=document.createElement("LI"),dot.classList="try dot",dot.id="m"+N+"d"+i,dot.onclick=dotClick,dotsC.appendChild(dot);for(movesC.appendChild(dotsC),ansC=document.createElement("DIV"),ansC.classList="answer hidden",i=0;i<2;i++){for(ansC_sub=document.createElement("OL"),ansC_sub.classList="answer_l"+i,j=0;j<2;j++)dotlet=document.createElement("LI"),dotlet.id="a"+N+"2d"+(2*i+j),dotlet.classList="dot_answ",ansC_sub.appendChild(dotlet);ansC.appendChild(ansC_sub)}dotsC.appendChild(ansC),N>=0&&($("#submit").remove(),btn=document.createElement("A"),btn.id="submit",btn.onclick=submit,btnchk=document.createElement("I"),btnchk.className="checkBtn circle",btnchk.innerHTML="&#x2714;",btn.appendChild(btnchk),dotsC.appendChild(btn)),N++}function checkGuess(e){for(dotN=0,$(".answer.hidden").removeClass("hidden"),$(".answer").animate({opacity:"1"},800,"swing"),i=0;i<e[0];i++)$("#a"+(N-1)+"2d"+dotN).animate({backgroundColor:answerCol[0]},500,"swing"),$("#a"+(N-1)+"2d"+dotN).addClass("active"),dotN++;for(i=0;i<e[1];i++)$("#a"+(N-1)+"2d"+dotN).animate({backgroundColor:answerCol[1]},500,"swing"),$("#a"+(N-1)+"2d"+dotN).addClass("active"),dotN++}function dotClick(e){newClickID="#"+e.explicitOriginalTarget.id,$(newClickID).toggleClass("selected"),"#null"!=game.lastClicked?$(game.lastClicked).removeClass("selected"):$(game.lastClicked).addClass("selected"),newClickID!=game.lastClicked||$("#color_popup").hasClass("hidden")?$("#color_popup").removeClass("hidden"):$("#color_popup").addClass("hidden"),game.lastClicked=newClickID,dotNumber=parseInt(this.id.split("d")[1]),changeColor()}function changeColor(e){e&&(clickedID=parseInt(e.explicitOriginalTarget.id.split("-")[1]),$(game.lastClicked).hasClass("unclickable")||($(game.lastClicked).animate({backgroundColor:game.colors[clickedID]},200,"swing"),$(game.lastClicked).addClass("active"),game.currGuess[game.lastClicked.split("d")[1]]=clickedID))}function showSolution(){$(".dot.sol").each(function(){dotNumber=parseInt(this.id.split("l")[1]);var e=game.colors[game.solution[dotNumber]];$(this).css("background-color",e)}),$("#solutionContainer").removeClass("hidden"),$("#color_popup").hide()}function createGame(e,t=!1){for(game.solution=[Math.floor(Math.random()*e),Math.floor(Math.random()*e),Math.floor(Math.random()*e),Math.floor(Math.random()*e)],game.colors=[],i=0;i<e;i++)game.colors.push("hsl("+Math.ceil(i*(360/e+1))+",80%,50%)"),col_itm=document.createElement("LI"),col_itm.classList="color dot menu active",col_itm.id="clr-"+i,col_itm.onclick=changeColor,col_itm.setAttribute("style","background-color:"+game.colors[i]),$("#color_popup").append(col_itm);$("#movesContainer").empty(),newTry(),$("#clr_select").prop("disabled","disabled"),$(".win_message")&&($(".win_message").hide(),$("#solutionContainer").addClass("hidden"))}var answerCol=["#df0e0e","#ffffff"],game=[];game.solution=[],game.colors=[],game.currGuess=[-1,-1,-1,-1],game.lastClicked="#null";var movesC=document.getElementById("movesContainer"),N=0;buttons=document.querySelectorAll(".modal.btn"),buttons.forEach(e=>{e.addEventListener("click",function(){href=e.getAttribute("href"),document.querySelector("#howtos").classList.remove("hidden"),document.querySelectorAll(".modal.panel").forEach(e=>{e.classList.remove("active"),e.classList.add("hidden")}),"#close"!=href&&(document.querySelector(href).classList.toggle("active"),document.querySelector(href).classList.toggle("hidden"))})}),$(document).ready(function(){$("#clr_select").prop("selectedIndex",0)});